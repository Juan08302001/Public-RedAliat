<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Asistente Virtual Aliat</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #eef2f7;
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh; color: #333;
  }
  #chat-container {
    background: white;
    width: 95%; max-width: 500px; height: 90vh;
    border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    display: flex; flex-direction: column; overflow: hidden;
  }
  #chat-header {
    background: #0d47a1; color: white; text-align: center;
    padding: 1rem; font-size: 1.4rem; font-weight: bold;
    letter-spacing: 0.5px;
  }
  #chat-messages {
    flex: 1; padding: 1rem; overflow-y: auto;
    display: flex; flex-direction: column; gap: 0.75rem;
    background: #f7f9fc;
  }
  .message {
    max-width: 80%; padding: 0.8rem 1rem;
    border-radius: 20px; line-height: 1.4;
    font-size: 0.95rem;
  }
  .bot-message { background: #e3eaf4; align-self: flex-start; }
  .user-message { background: #1976d2; color: white; align-self: flex-end; }
  #chat-input-area {
    background: #fafafa; border-top: 1px solid #ddd;
    padding: 0.8rem; display: flex; flex-direction: column; gap: 0.5rem;
  }
  .option-btn {
    width: 100%; padding: 0.9rem; font-size: 1rem;
    background: #1976d2; color: white; border: none;
    border-radius: 10px; cursor: pointer;
    transition: background 0.3s ease;
  }
  .option-btn:hover { background: #0d47a1; }
  #restart-btn {
    background: #4caf50; color: white;
    padding: 0.9rem; border: none;
    border-radius: 10px; margin-top: 0.5rem;
    font-size: 1rem; cursor: pointer;
    display: none; width: 100%;
  }
  #restart-btn:hover { background: #388e3c; }
</style>
</head>
<body>

<div id="chat-container">
  <div id="chat-header">Asistente Virtual Aliat</div>
  <div id="chat-messages"></div>
  <div id="chat-input-area"></div>
  <button id="restart-btn">Reiniciar Chat</button>
</div>

<script>
  const menu = {
    inicio: {
      question: "Hola 👋 Soy tu asistente virtual Aliat. ¿En qué área necesitas ayuda?",
      options: [
        { text: "Servicios Escolares", next: "escolares" },
        { text: "Sistemas", next: "sistemas" },
        { text: "Finanzas", next: "finanzas" }
      ]
    },
    escolares: {
      question: "Preguntas frecuentes en Servicios Escolares:",
      options: [
        { text: "Requisitos para Servicio Social", answer: "Debes haber cubierto el 70% de créditos y llenar el formato en Servicios Escolares." },
        { text: "Costo de la ficha", answer: "El costo de la ficha es de $XXX MXN. Consulta en caja o en el portal institucional." },
        { text: "Proceso de Reinscripción", answer: "La reinscripción se realiza desde el portal Mi Red Aliat en la sección de reinscripción." },
        { text: "Solicitar constancia", answer: "Solicita tu constancia en Servicios Escolares o por correo institucional." },
        { text: "⬅️ Regresar al menú principal", next: "inicio" }
      ]
    },
    sistemas: {
      question: "Preguntas frecuentes en Sistemas:",
      options: [
        { text: "No puedo entrar a Mi Red Aliat", answer: "Verifica que no tengas dos apps instaladas. Si sigue fallando, desinstala ambas e instala la versión más reciente." },
        { text: "Olvidé mi contraseña", answer: "Envía un correo a ayudaenlinea@redaliat.mx con tu nombre completo, matrícula, carrera y campus." },
        { text: "⬅️ Regresar al menú principal", next: "inicio" }
      ]
    },
    finanzas: {
      question: "Preguntas frecuentes en Finanzas:",
      options: [
        { text: "Formas de pago", answer: "Puedes pagar en ventanilla, OXXO, transferencia o en el portal web." },
        { text: "Consultar adeudos", answer: "Revisa tu estado de cuenta en Finanzas o en el portal institucional." },
        { text: "⬅️ Regresar al menú principal", next: "inicio" }
      ]
    }
  };

  let currentSection = "inicio";
  const chatMessages = document.getElementById("chat-messages");
  const inputArea = document.getElementById("chat-input-area");
  const restartBtn = document.getElementById("restart-btn");

  function appendMessage(text, sender) {
    const msgDiv = document.createElement("div");
    msgDiv.classList.add("message", sender === "bot" ? "bot-message" : "user-message");
    msgDiv.textContent = text;
    chatMessages.appendChild(msgDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function showOptions(options) {
    inputArea.innerHTML = "";
    options.forEach(opt => {
      const btn = document.createElement("button");
      btn.classList.add("option-btn");
      btn.textContent = opt.text;
      btn.onclick = () => processOption(opt);
      inputArea.appendChild(btn);
    });
  }

  function processOption(opt) {
    appendMessage(opt.text, "user");
    if (opt.answer) {
      setTimeout(() => {
        appendMessage(opt.answer, "bot");
        showRestart();
      }, 500);
    } else if (opt.next) {
      currentSection = opt.next;
      setTimeout(() => botAsk(menu[currentSection]), 500);
    }
  }

  function botAsk(section) {
    appendMessage(section.question, "bot");
    showOptions(section.options);
  }

  function showRestart() {
    restartBtn.style.display = "block";
    inputArea.innerHTML = "";
  }

  function restartChat() {
    chatMessages.innerHTML = "";
    restartBtn.style.display = "none";
    currentSection = "inicio";
    botAsk(menu[currentSection]);
  }

  restartBtn.addEventListener("click", restartChat);

  // Inicia chatbot
  botAsk(menu[currentSection]);
</script>

</body>
</html>
