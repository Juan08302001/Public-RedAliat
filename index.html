<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asistente Virtual UTAN Industrias</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    background: #e9eef6;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #chat-container {
    background: #fff;
    width: 95%;
    max-width: 420px;
    height: 90vh;
    display: flex;
    flex-direction: column;
    border-radius: 16px;
    box-shadow: 0px 8px 22px rgba(0,0,0,0.15);
    overflow: hidden;
  }
  #chat-header {
    background: linear-gradient(135deg, #0d47a1, #1976d2);
    color: white;
    text-align: center;
    padding: 1rem;
    font-weight: bold;
    font-size: 1.3rem;
    letter-spacing: 0.5px;
  }
  #chat-messages {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
    background: #f4f7fb;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }
  .message {
    max-width: 75%;
    padding: 0.7rem 1rem;
    border-radius: 18px;
    font-size: 0.95rem;
    line-height: 1.4;
    animation: fadeIn 0.3s ease;
  }
  .bot {
    background: #e3ebf8;
    align-self: flex-start;
    border-bottom-left-radius: 6px;
  }
  .user {
    background: #1976d2;
    color: #fff;
    align-self: flex-end;
    border-bottom-right-radius: 6px;
  }
  .options {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .chip {
    background: #1976d2;
    color: #fff;
    padding: 0.5rem 0.9rem;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    border: none;
    transition: 0.3s;
  }
  .chip:hover { background: #0d47a1; }
  .typing {
    font-style: italic;
    font-size: 0.85rem;
    color: #555;
    animation: blink 1s infinite;
  }
  @keyframes blink {
    0% {opacity: .2;}
    50% {opacity: 1;}
    100% {opacity: .2;}
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }
</style>
</head>
<body>

<div id="chat-container">
  <div id="chat-header">ü§ñ Asistente Virtual UTAN Industrias</div>
  <div id="chat-messages"></div>
</div>

<script>
  const menu = {
    inicio: {
      question: "Hola üëã Soy tu asistente virtual. ¬øEn qu√© √°rea necesitas ayuda?",
      options: [
        { text: "üìö Servicios Escolares", next: "escolares" },
        { text: "üíª Sistemas", next: "sistemas" },
        { text: "üí∞ Finanzas", next: "finanzas" }
      ]
    },
    escolares: {
      question: "Preguntas frecuentes en Servicios Escolares:",
      options: [
        { text: "Entrega de documentos de nuevo ingreso", answer: "Debes entregar: acta de nacimiento, certificado de preparatoria, CURP, comprobante de pago y fotos tama√±o infantil." },
        { text: "Requisitos para Servicio Social", answer: "Debes haber cubierto al menos el 70% de cr√©ditos y llenar el formato en Servicios Escolares." },
        { text: "Carga de materias", answer: "Si tienes problemas con tu carga de materias, ac√©rcate con tu coordinador de carrera." },
        { text: "Solicitar constancias", answer: "Puedes solicitar constancias en Servicios Escolares o por correo institucional." },
        { text: "‚¨ÖÔ∏è Men√∫ principal", next: "inicio", reset: true }
      ]
    },
    sistemas: {
      question: "Preguntas frecuentes en Sistemas:",
      options: [
        { text: "No puedo entrar a Mi Red Aliat", answer: "Debes tener solo UNA app instalada. Si tienes dos, desinst√°lalas y mant√©n solo la m√°s reciente." },
        { text: "Problemas con Brightspace", answer: "Si Brightspace falla, escribe a mesa de ayuda: ayudaenlinea@aliat.edu.mx" },
        { text: "Olvid√© mi contrase√±a", answer: "Env√≠a un correo a ayudaenlinea@redaliat.mx con tu nombre, matr√≠cula, carrera y campus." },
        { text: "Licencia de Office", answer: "Tu cuenta incluye Office 365 online. No instales local, ya que despu√©s de 3 meses marcar√° como inactiva." },
        { text: "‚¨ÖÔ∏è Men√∫ principal", next: "inicio", reset: true }
      ]
    },
    finanzas: {
      question: "Preguntas frecuentes en Finanzas:",
      options: [
        { text: "Costo de inscripci√≥n", answer: "El costo depende del campus. Consulta en caja o portal institucional." },
        { text: "Costo de reinscripci√≥n", answer: "El costo de reinscripci√≥n es de $XXX MXN. Confirma en Finanzas." },
        { text: "Constancia sencilla", answer: "La constancia sencilla tiene un costo de $XX MXN y se solicita en Finanzas o v√≠a portal." },
        { text: "Constancia con calificaciones y foto", answer: "La constancia con calificaciones y foto tiene un costo de $XX MXN. Tram√≠tala en Finanzas." },
        { text: "Formas de pago", answer: "Puedes pagar con tarjeta de d√©bito, cr√©dito o efectivo." },
        { text: "Pago en OXXO", answer: "S√≠, puedes pagar en OXXO con la referencia de Finanzas." },
        { text: "‚¨ÖÔ∏è Men√∫ principal", next: "inicio", reset: true }
      ]
    }
  };

  const chat = document.getElementById("chat-messages");

  function addMessage(text, sender="bot") {
    const div = document.createElement("div");
    div.classList.add("message", sender);
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  function showOptions(options, sectionKey) {
    const optDiv = document.createElement("div");
    optDiv.classList.add("options");
    options.forEach(opt => {
      const btn = document.createElement("button");
      btn.classList.add("chip");
      btn.textContent = opt.text;
      btn.onclick = () => handleOption(opt, sectionKey);
      optDiv.appendChild(btn);
    });
    chat.appendChild(optDiv);
    chat.scrollTop = chat.scrollHeight;
  }

  function typingEffect(callback) {
    const typingDiv = document.createElement("div");
    typingDiv.classList.add("typing");
    typingDiv.textContent = "Escribiendo...";
    chat.appendChild(typingDiv);
    chat.scrollTop = chat.scrollHeight;
    setTimeout(() => {
      chat.removeChild(typingDiv);
      callback();
    }, 800);
  }

  function renderSection(key) {
    const section = menu[key];
    typingEffect(() => {
      addMessage(section.question, "bot");
      showOptions(section.options, key);
    });
  }

  function handleOption(opt, sectionKey) {
    addMessage(opt.text, "user");
    if (opt.reset) {
      resetChat(); // üî• limpia y vuelve al inicio
    } else if (opt.answer) {
      typingEffect(() => {
        addMessage(opt.answer, "bot");
        showOptions([{text:"‚¨ÖÔ∏è Regresar", next:sectionKey}, {text:"üè† Men√∫ principal", next:"inicio", reset:true}], sectionKey);
      });
    } else if (opt.next) {
      renderSection(opt.next);
    }
  }

  function resetChat() {
    chat.innerHTML = "";  // üî• borra todo el historial
    renderSection("inicio");
  }

  // inicia en el men√∫
  renderSection("inicio");
</script>

</body>
</html>
